/* Cookies Directive - The rewrite. Now a jQuery plugin
 * Version: 2.0.1
 * Author: Ollie Phillips
 * 24 October 2013
 */
!function(e){e.cookiesDirective=function(o){if(o=e.extend({explicitConsent:!0,position:"top",duration:10,limit:0,message:null,cookieScripts:null,privacyPolicyUri:"privacy.html",scriptWrapper:function(){},fontColor:"#FFFFFF",fontSize:"13px",backgroundColor:"#000000",backgroundOpacity:"80",linkColor:"#CA0000"},o),i("cookiesDirective"))o.scriptWrapper.call()
else{if(0<o.limit){if(i("cookiesDisclosureCount")){var n=i("cookiesDisclosureCount")
n++,t("cookiesDisclosureCount",n,1)}else t("cookiesDisclosureCount",1,1)
o.limit>=i("cookiesDisclosureCount")&&c(o)}else c(o)
o.explicitConsent||o.scriptWrapper.call()}},e.cookiesDirective.loadScript=function(i){i=e.extend({uri:"",appendTo:"body"},i)
var t=String(i.appendTo),o=document.createElement("script")
switch(o.src=i.uri,o.type="text/javascript",o.onload=o.onreadystatechange=function(){},i.appendTo){case"head":e("head").append(o)
break
case"body":e("body").append(o)
break
default:e("#"+t).append(o)}}
var i=function(e){e+="="
for(var i=document.cookie.split(";"),t=0;t<i.length;t++){for(var o=i[t];" "==o.charAt(0);)o=o.substring(1,o.length)
if(0===o.indexOf(e))return o.substring(e.length,o.length)}return null},t=function(e,i,t){var o=""
t&&(o=new Date,o.setTime(o.getTime()+864e5*t),o="; expires="+o.toGMTString()),document.cookie=e+"="+i+o+"; path=/"},o=function(){var e
if("Microsoft Internet Explorer"==navigator.appName){if(null!==/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(navigator.userAgent)&&(e=parseFloat(RegExp.$1)),8>=e)return!0
if(9==e&&"BackCompat"==document.compatMode)return e=document.createElement("meta"),e.content="IE=EmulateIE8",document.getElementsByTagName("head")[0].appendChild(e),!0}return!1},c=function(i){i.css="fixed",o()&&(i.position="top",i.css="absolute")
var c=""
if(i.cookieScripts){var c=i.cookieScripts.split(","),n=c.length,a=""
if(1<n){for(var s=0;s<n-1;s++)a+=c[s]+", "
c=" We use "+a.substring(0,a.length-2)+" and "+c[n-1]+" scripts, which all set cookies. "}else c=" We use a "+c[0]+" script which sets cookies."}n='<div id="epd"><div id="cookiesdirective" style="position:'+i.css+";"+i.position+":-300px;left:0px;width:100%;",n+="height:auto;background:"+i.backgroundColor+";opacity:."+i.backgroundOpacity+";",n+="-ms-filter: “alpha(opacity="+i.backgroundOpacity+")”; filter: alpha(opacity="+i.backgroundOpacity+");",n+="-khtml-opacity: ."+i.backgroundOpacity+"; -moz-opacity: ."+i.backgroundOpacity+";",n+="color:"+i.fontColor+";font-family:"+i.fontFamily+";font-size:"+i.fontSize+";letter-spacing: 0;",n+='text-align:center;z-index:1000;">',n+='<div class="cookieText" style="position:relative;height:auto;width:90%;padding:10px;margin-left:auto;margin-right:auto;">',!i.message&&i.explicitConsent&&(i.message="This site uses cookies. Some of the cookies we ",i.message+="use are essential for parts of the site to operate and have already been set."),n+=i.message,i.explicitConsent?(n+=c+"You may delete and block all cookies from this site, but parts of the site will not work.",n+="To find out more about cookies on this website",n+="<br/>",n+='<div id="epdnotick" style="color:#ca0000;display:none;margin:2px;"><span style="background:#cecece;padding:2px;">You must tick the "I accept cookies from this site" box to accept</span></div>',n+='<div style="margin-top:5px;">I accept cookies from this site <input type="checkbox" name="epdagree" id="epdagree" />&nbsp;',n+='<input type="submit" name="explicitsubmit" id="explicitsubmit" value="Continue"/><br/></div></div>'):(n+=c,n+='<input style="margin-left:10px;line-height:0;height:1.85em;color:#424a4d;border-width:1px;border-radius:0;border-style:solid;background-color:transparent;border-color:#424a4d;" type="submit" name="impliedsubmit" id="impliedsubmit" value="x"/></div>'),n+="</div></div>",e("body").append(n)
var r=i.position.toLowerCase()
"top"!=r&&"bottom"!=r&&(r="top")
var p=c=null
"top"==r?(c={top:"0"},p={top:"-300"}):(c={bottom:"0"},p={bottom:"-300"}),e("#cookiesdirective").animate(c,1e3,function(){i.explicitConsent?e("#explicitsubmit").click(function(){e("#epdagree").is(":checked")?(t("cookiesDirective",1,365),e("#cookiesdirective").animate(p,1e3,function(){e("#cookiesdirective").remove(),location.reload(!0)})):e("#epdnotick").css("display","block")}):e("#impliedsubmit").click(function(){t("cookiesDirective",1,365),e("#cookiesdirective").animate(p,1e3,function(){e("#cookiesdirective").remove()})}),0<i.duration&&setTimeout(function(){e("#cookiesdirective").animate({opacity:"0"},2e3,function(){e("#cookiesdirective").css(r,"-300px")})},1e3*i.duration)})}}(jQuery)
